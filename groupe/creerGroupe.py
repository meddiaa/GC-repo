# -*- coding: utf-8 -*-

# Form implementation generated from reading ui file 'creerGroupe.ui'
#
# Created by: PyQt5 UI code generator 5.15.10
#
# WARNING: Any manual changes made to this file will be lost when pyuic5 is
# run again.  Do not edit this file unless you know what you are doing.


from PyQt5 import QtCore, QtGui, QtWidgets
import mysql.connector
from connexion_DB import connect_to_DB




class Ui_creerGroupe(object):
    def setupUi(self, creerGroupe):
        creerGroupe.setObjectName("creerGroupe")
        creerGroupe.resize(805, 850)
        creerGroupe.setStyleSheet("background-color: rgb(219, 219, 219);")
        self.horizontalLayout_2 = QtWidgets.QHBoxLayout(creerGroupe)
        self.horizontalLayout_2.setObjectName("horizontalLayout_2")
        self.widget = QtWidgets.QWidget(creerGroupe)
        self.widget.setStyleSheet("background-color: rgb(219, 219, 219);")
        self.widget.setObjectName("widget")
        self.verticalLayout = QtWidgets.QVBoxLayout(self.widget)
        self.verticalLayout.setContentsMargins(0, 0, 0, 0)
        self.verticalLayout.setObjectName("verticalLayout")
        self.widget_3 = QtWidgets.QWidget(self.widget)
        self.widget_3.setObjectName("widget_3")
        self.horizontalLayout = QtWidgets.QHBoxLayout(self.widget_3)
        self.horizontalLayout.setObjectName("horizontalLayout")
        self.label = QtWidgets.QLabel(self.widget_3)
        font = QtGui.QFont()
        font.setFamily("Agency FB")
        font.setPointSize(26)
        font.setBold(True)
        font.setWeight(75)
        self.label.setFont(font)
        self.label.setStyleSheet("color: rgb(26, 61, 119);")
        self.label.setAlignment(QtCore.Qt.AlignCenter)
        self.label.setObjectName("label")
        self.horizontalLayout.addWidget(self.label)
        self.verticalLayout.addWidget(self.widget_3)
        self.widget_2 = QtWidgets.QWidget(self.widget)
        self.widget_2.setObjectName("widget_2")
        self.verticalLayout_3 = QtWidgets.QVBoxLayout(self.widget_2)
        self.verticalLayout_3.setSizeConstraint(QtWidgets.QLayout.SetDefaultConstraint)
        self.verticalLayout_3.setContentsMargins(0, 0, 0, 0)
        self.verticalLayout_3.setObjectName("verticalLayout_3")
        self.widget_6 = QtWidgets.QWidget(self.widget_2)
        self.widget_6.setMinimumSize(QtCore.QSize(500, 20))
        self.widget_6.setSizeIncrement(QtCore.QSize(0, 0))
        self.widget_6.setObjectName("widget_6")
        self.verticalLayout_4 = QtWidgets.QVBoxLayout(self.widget_6)
        self.verticalLayout_4.setSpacing(15)
        self.verticalLayout_4.setObjectName("verticalLayout_4")
        self.sport = QtWidgets.QLabel(self.widget_6)
        self.sport.setMinimumSize(QtCore.QSize(0, 35))
        font = QtGui.QFont()
        font.setFamily("Agency FB")
        font.setPointSize(13)
        font.setBold(True)
        font.setWeight(75)
        self.sport.setFont(font)
        self.sport.setStyleSheet("color: rgb(26, 61, 119);")
        self.sport.setObjectName("sport")
        self.verticalLayout_4.addWidget(self.sport)
        self.dropdownSport = QtWidgets.QComboBox(self.widget_6)
        self.dropdownSport.setMinimumSize(QtCore.QSize(0, 35))
        font = QtGui.QFont()
        font.setFamily("Agency FB")
        font.setPointSize(13)
        self.dropdownSport.setFont(font)
        self.dropdownSport.setStyleSheet("background-color: rgb(255, 255, 255);\n"
"color: rgb(83, 83, 83);")
        self.dropdownSport.setInsertPolicy(QtWidgets.QComboBox.NoInsert)
        self.dropdownSport.setObjectName("dropdownSport")
        self.dropdownSport.addItem("")
        self.verticalLayout_4.addWidget(self.dropdownSport)
        self.AgeMin = QtWidgets.QLabel(self.widget_6)
        self.AgeMin.setMinimumSize(QtCore.QSize(0, 35))
        font = QtGui.QFont()
        font.setFamily("Agency FB")
        font.setPointSize(13)
        font.setBold(True)
        font.setWeight(75)
        self.AgeMin.setFont(font)
        self.AgeMin.setStyleSheet("color: rgb(26, 61, 119);")
        self.AgeMin.setObjectName("AgeMin")
        self.verticalLayout_4.addWidget(self.AgeMin)
        self.lineEditAgeMin = QtWidgets.QLineEdit(self.widget_6)
        self.lineEditAgeMin.setMinimumSize(QtCore.QSize(0, 35))
        self.lineEditAgeMin.setSizeIncrement(QtCore.QSize(0, 0))
        font = QtGui.QFont()
        font.setFamily("Agency FB")
        font.setPointSize(13)
        self.lineEditAgeMin.setFont(font)
        self.lineEditAgeMin.setStyleSheet("background-color: rgb(255, 255, 255);")
        self.lineEditAgeMin.setObjectName("lineEditAgeMin")
        self.verticalLayout_4.addWidget(self.lineEditAgeMin)

        self.AgeMax = QtWidgets.QLabel(self.widget_6)
        self.AgeMax.setMinimumSize(QtCore.QSize(0, 35))
        font = QtGui.QFont()
        font.setFamily("Agency FB")
        font.setPointSize(13)
        font.setBold(True)
        font.setWeight(75)
        self.AgeMax.setFont(font)
        self.AgeMax.setStyleSheet("color: rgb(26, 61, 119);")
        self.AgeMax.setObjectName("AgeMax")
        self.verticalLayout_4.addWidget(self.AgeMax)
        self.lineEditAgeMax = QtWidgets.QLineEdit(self.widget_6)
        self.lineEditAgeMax.setMinimumSize(QtCore.QSize(0, 35))
        self.lineEditAgeMax.setSizeIncrement(QtCore.QSize(0, 0))
        font = QtGui.QFont()
        font.setFamily("Agency FB")
        font.setPointSize(13)
        self.lineEditAgeMax.setFont(font)
        self.lineEditAgeMax.setStyleSheet("background-color: rgb(255, 255, 255);")
        self.lineEditAgeMax.setObjectName("lineEditAge")
        self.verticalLayout_4.addWidget(self.lineEditAgeMax)
        self.PoidsMin = QtWidgets.QLabel(self.widget_6)
        self.PoidsMin.setMinimumSize(QtCore.QSize(0, 35))
        font = QtGui.QFont()
        font.setFamily("Agency FB")
        font.setPointSize(13)
        font.setBold(True)
        font.setWeight(75)
        self.PoidsMin.setFont(font)
        self.PoidsMin.setStyleSheet("color: rgb(26, 61, 119);")
        self.PoidsMin.setObjectName("PoidsMin")
        self.verticalLayout_4.addWidget(self.PoidsMin)
        self.lineEditPoidsMin = QtWidgets.QLineEdit(self.widget_6)
        self.lineEditPoidsMin.setMinimumSize(QtCore.QSize(0, 35))
        self.lineEditPoidsMin.setSizeIncrement(QtCore.QSize(0, 0))
        font = QtGui.QFont()
        font.setFamily("Agency FB")
        font.setPointSize(13)
        self.lineEditPoidsMin.setFont(font)
        self.lineEditPoidsMin.setStyleSheet("background-color: rgb(255, 255, 255);")
        self.lineEditPoidsMin.setObjectName("lineEditPoidsMin")
        self.verticalLayout_4.addWidget(self.lineEditPoidsMin)
        self.PoidsMax = QtWidgets.QLabel(self.widget_6)
        self.PoidsMax.setMinimumSize(QtCore.QSize(0, 35))
        font = QtGui.QFont()
        font.setFamily("Agency FB")
        font.setPointSize(13)
        font.setBold(True)
        font.setWeight(75)
        self.PoidsMax.setFont(font)
        self.PoidsMax.setStyleSheet("color: rgb(26, 61, 119);")
        self.PoidsMax.setObjectName("Poids")
        self.verticalLayout_4.addWidget(self.PoidsMax)
        self.lineEditPoidsMax = QtWidgets.QLineEdit(self.widget_6)
        self.lineEditPoidsMax.setMinimumSize(QtCore.QSize(0, 35))
        self.lineEditPoidsMax.setSizeIncrement(QtCore.QSize(0, 0))
        font = QtGui.QFont()
        font.setFamily("Agency FB")
        font.setPointSize(13)
        self.lineEditPoidsMax.setFont(font)
        self.lineEditPoidsMax.setStyleSheet("background-color: rgb(255, 255, 255);")
        self.lineEditPoidsMax.setObjectName("lineEditPoidsMax")
        self.verticalLayout_4.addWidget(self.lineEditPoidsMax)

        self.Sexe = QtWidgets.QLabel(self.widget_6)
        self.Sexe.setMinimumSize(QtCore.QSize(0, 35))
        font = QtGui.QFont()
        font.setFamily("Agency FB")
        font.setPointSize(13)
        font.setBold(True)
        font.setWeight(75)
        self.Sexe.setFont(font)
        self.Sexe.setStyleSheet("color: rgb(26, 61, 119);")
        self.Sexe.setObjectName("Sexe")
        self.verticalLayout_4.addWidget(self.Sexe)

        self.dropdownSexe = QtWidgets.QComboBox(self.widget_6)
        self.dropdownSexe.setMinimumSize(QtCore.QSize(0, 35))
        font = QtGui.QFont()
        font.setFamily("Agency FB")
        font.setPointSize(13)
        self.dropdownSexe.setFont(font)
        self.dropdownSexe.setStyleSheet("background-color: rgb(255, 255, 255);\n"
                                        "color: rgb(83, 83, 83);")
        self.dropdownSexe.setInsertPolicy(QtWidgets.QComboBox.NoInsert)
        self.dropdownSexe.setObjectName("dropdownSexe")
        self.dropdownSexe.addItem("")
        self.verticalLayout_4.addWidget(self.dropdownSexe)

        self.horizontalLayout_3 = QtWidgets.QHBoxLayout()
        self.horizontalLayout_3.setContentsMargins(10, -1, 10, -1)
        self.horizontalLayout_3.setObjectName("horizontalLayout_3")
        self.pushButtonSave = QtWidgets.QPushButton(self.widget_6)
        self.pushButtonSave.setMinimumSize(QtCore.QSize(200, 40))
        self.pushButtonSave.setMaximumSize(QtCore.QSize(200, 40))
        font = QtGui.QFont()
        font.setPointSize(10)
        self.pushButtonSave.setFont(font)
        self.pushButtonSave.setCursor(QtGui.QCursor(QtCore.Qt.PointingHandCursor))
        self.pushButtonSave.setStyleSheet("background-color: rgb(38, 255, 0);\n"
"color: rgb(252, 252, 252);\n"
"border-radius:5px;\n"
"")
        self.pushButtonSave.setCheckable(True)
        self.pushButtonSave.setObjectName("pushButtonSave")
        self.horizontalLayout_3.addWidget(self.pushButtonSave)
        self.pushButtonAnnuler = QtWidgets.QPushButton(self.widget_6)
        self.pushButtonAnnuler.setMinimumSize(QtCore.QSize(200, 40))
        self.pushButtonAnnuler.setMaximumSize(QtCore.QSize(200, 16777215))
        font = QtGui.QFont()
        font.setPointSize(10)
        self.pushButtonAnnuler.setFont(font)
        self.pushButtonAnnuler.setCursor(QtGui.QCursor(QtCore.Qt.PointingHandCursor))
        self.pushButtonAnnuler.setStyleSheet("background-color: rgb(255, 93, 93);\n"
"border-radius:5px;\n"
"color: rgb(252, 252, 252);")
        self.pushButtonAnnuler.setCheckable(True)
        self.pushButtonAnnuler.setObjectName("pushButtonAnnuler")
        self.horizontalLayout_3.addWidget(self.pushButtonAnnuler)
        self.verticalLayout_4.addLayout(self.horizontalLayout_3)
        self.verticalLayout_3.addWidget(self.widget_6)
        self.verticalLayout.addWidget(self.widget_2)
        self.verticalLayout.setStretch(0, 1)
        self.verticalLayout.setStretch(1, 8)
        self.horizontalLayout_2.addWidget(self.widget)

        self.retranslateUi(creerGroupe)
        QtCore.QMetaObject.connectSlotsByName(creerGroupe)
        self.pushButtonSave.clicked.connect(self.ajout_groupe)

    def retranslateUi(self, creerGroupe):
        _translate = QtCore.QCoreApplication.translate
        creerGroupe.setWindowTitle(_translate("creerGroupe", "creerGroupe"))
        self.label.setText(_translate("creerGroupe", "Créer un Groupe"))
        self.sport.setText(_translate("creerGroupe", "Sport"))
        self.dropdownSport.setItemText(0, _translate("creerGroupe", "Choisir"))
        self.dropdownSport.addItem("karate fille")
        self.dropdownSport.addItem("kick -16")
        self.dropdownSport.addItem("kick +16")
        self.dropdownSport.addItem("fitness N-Edd")
        self.dropdownSport.addItem("Fitness femme")
        self.dropdownSport.addItem("fitness hit")
        self.dropdownSport.addItem("kick walid")
        self.dropdownSport.addItem("self defense")
        self.AgeMin.setText(_translate("creerGroupe", "Age Min"))
        self.lineEditAgeMin.setPlaceholderText(_translate("creerGroupe", "Age Min"))
        self.AgeMax.setText(_translate("creerGroupe", "Age Max"))
        self.lineEditAgeMax.setPlaceholderText(_translate("creerGroupe", "Age Max"))
        self.PoidsMin.setText(_translate("creerGroupe", "Poids Min"))
        self.lineEditPoidsMin.setPlaceholderText(_translate("creerGroupe", "Poids Min"))
        self.PoidsMax.setText(_translate("creerGroupe", "Poids Max"))
        self.lineEditPoidsMax.setPlaceholderText(_translate("creerGroupe", "Poids Max"))
        self.Sexe.setText(_translate("creerGroupe", "Sexe"))
        self.dropdownSexe.setItemText(0, _translate("creerGroupe", "Choisir"))
        self.dropdownSexe.addItem("M")
        self.dropdownSexe.addItem("F")
        self.pushButtonSave.setText(_translate("creerGroupe", "Enregistrer"))
        self.pushButtonAnnuler.setText(_translate("creerGroupe", "Annuler"))

    def ouverture_page_ajout(self):  #######
        self.ui1 = Ui_creerGroupe()  #######
        self.ajouterGroupe = QtWidgets.QWidget()  ########
        self.ui1.setupUi(self.ajouterGroupe)  #########
        self.ajouterGroupe.show()

    def ajout_groupe(self):
            connection, cursor = connect_to_DB()

            sport = self.dropdownSport.currentText()
            age_min = self.lineEditAgeMin.text()
            age_max = self.lineEditAgeMax.text()
            poids_min = self.lineEditPoidsMin.text()
            poids_max = self.lineEditPoidsMax.text()
            sexe = self.dropdownSexe.currentText()
            cursor.execute("SELECT MAX(id_groupe) FROM groupes")
            last_id = cursor.fetchone()[0]
            new_id = last_id + 1
            print(new_id)

            query_insert = "INSERT INTO groupes (id_groupe,sport,age_min,age_max,poids_min,poids_max,sexe,nbr_adhérants) VALUES (%s,%s,%s, %s,  %s,%s,%s,%s)"
            values = (new_id,sport,age_min,age_max,poids_min,poids_max,sexe,50,)

            try:
                        cursor.execute(query_insert, values)
                        connection.commit()
                        self.msg2 = QtWidgets.QMessageBox()
                        self.msg2.setIcon(QtWidgets.QMessageBox.Information)
                        self.msg2.setWindowTitle("Attention !")
                        self.msg2.setText("votre abonnement a été sajouté avec succes")
                        self.msg2.exec_()
            except mysql.connector.Error as err:
                        self.msg2 = QtWidgets.QMessageBox()
                        self.msg2.setWindowTitle("Attention !")
                        self.msg2.setIcon(QtWidgets.QMessageBox.Information)
                        self.msg2.setText("erreur lors de l'Ajout du groupe")
                        self.msg2.exec_()



            # Fermez le curseur et la connexion à la base de données
            cursor.close()
            connection.close()








if __name__ == "__main__":
    import sys
    app = QtWidgets.QApplication(sys.argv)
    creerGroupe = QtWidgets.QDialog()
    ui = Ui_creerGroupe()
    ui.setupUi(creerGroupe)
    creerGroupe.show()
    sys.exit(app.exec_())
